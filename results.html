<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Your 7 Matches</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: #fafafa;
      padding: 40px;
      max-width: 900px;
      margin: auto;
    }
    h1 {
      font-size: 28px;
      margin-bottom: 30px;
    }
    .card {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
    }
    .area {
      font-size: 12px;
      color: #777;
      margin-bottom: 6px;
    }
    .name {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 6px;
    }
    .desc {
      font-size: 14px;
      color: #444;
    }
  </style>
</head>
<body>

<h1>Your 7 Matches</h1>
<div id="results">Loading...</div>

<script>
  async function loadResults() {
    const params = new URLSearchParams(window.location.search);
    const area = params.get("areaDetails");

    if (!area) {
      document.getElementById("results").innerHTML = "No area selected.";
      return;
    }

    try {
      const res = await fetch(
        `/api/results?areaDetails=${encodeURIComponent(area)}`
      );
      const data = await res.json();

      if (!data.ok) {
        document.getElementById("results").innerHTML =
          "Error loading results.";
        console.error(data);
        return;
      }

      const container = document.getElementById("results");
      container.innerHTML = "";

      data.shops.forEach(shop => {
        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <div class="area">${shop.area_group} / ${shop.area_detail}</div>
          <div class="name">${shop.shop_name}</div>
          <div class="desc">${shop.short_desc || ""}</div>
        `;

        container.appendChild(card);
      });

    } catch (err) {
      document.getElementById("results").innerHTML =
        "Network error.";
      console.error(err);
    }
  }

  loadResults();
</script>

</body>
</html>
